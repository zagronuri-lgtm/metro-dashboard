"""
חגים יהודיים ומוסלמיים — תאריכים לסינון מניתוח זמני נסיעה.
בימים אלה לוחות הזמנים שונים מימים רגילים ולכן יש להוציא אותם מהניתוח.

עדכון: יש לעדכן את הרשימה בתחילת כל שנה עם התאריכים הנכונים.
חגים יהודיים קבועים בלוח העברי אבל משתנים בלועזי.
חגים מוסלמיים קבועים בלוח ההיג'רי ומשתנים בלועזי.
"""

# פורמט: DD/MM/YYYY (כמו בקובץ ההגדרות)

JEWISH_HOLIDAYS_2025 = {
    # ראש השנה
    "23/09/2025", "24/09/2025",
    # יום כיפור
    "02/10/2025",
    # סוכות
    "07/10/2025", "08/10/2025",
    # חול המועד סוכות
    "09/10/2025", "10/10/2025", "11/10/2025", "12/10/2025",
    # שמיני עצרת / שמחת תורה
    "13/10/2025", "14/10/2025",
    # חנוכה (ערבי חנוכה — לוח זמנים מיוחד בחלק מהקווים)
    "15/12/2025", "16/12/2025", "17/12/2025", "18/12/2025",
    "19/12/2025", "20/12/2025", "21/12/2025", "22/12/2025",
    # פורים
    "14/03/2025", "15/03/2025",
    # פסח
    "13/04/2025", "14/04/2025",
    # חול המועד פסח
    "15/04/2025", "16/04/2025", "17/04/2025", "18/04/2025",
    # שביעי של פסח
    "19/04/2025", "20/04/2025",
    # יום העצמאות
    "01/05/2025",
    # ל"ג בעומר
    "16/05/2025",
    # שבועות
    "02/06/2025", "03/06/2025",
    # תשעה באב
    "03/08/2025",
}

JEWISH_HOLIDAYS_2026 = {
    # ראש השנה
    "12/09/2026", "13/09/2026",
    # יום כיפור
    "21/09/2026",
    # סוכות
    "26/09/2026", "27/09/2026",
    # חול המועד סוכות
    "28/09/2026", "29/09/2026", "30/09/2026", "01/10/2026",
    # שמיני עצרת / שמחת תורה
    "02/10/2026", "03/10/2026",
    # חנוכה
    "05/12/2026", "06/12/2026", "07/12/2026", "08/12/2026",
    "09/12/2026", "10/12/2026", "11/12/2026", "12/12/2026",
    # פורים
    "04/03/2026", "05/03/2026",
    # פסח
    "02/04/2026", "03/04/2026",
    # חול המועד פסח
    "04/04/2026", "05/04/2026", "06/04/2026", "07/04/2026",
    # שביעי של פסח
    "08/04/2026", "09/04/2026",
    # יום העצמאות
    "22/04/2026",
    # שבועות
    "22/06/2026", "23/06/2026",
    # תשעה באב
    "23/07/2026",
}

MUSLIM_HOLIDAYS_2025 = {
    # רמדאן (תאריכים משוערים — לוח הזמנים משתנה בערים מעורבות)
    "01/03/2025", "02/03/2025", "03/03/2025", "04/03/2025", "05/03/2025",
    "06/03/2025", "07/03/2025", "08/03/2025", "09/03/2025", "10/03/2025",
    "11/03/2025", "12/03/2025", "13/03/2025", "14/03/2025", "15/03/2025",
    "16/03/2025", "17/03/2025", "18/03/2025", "19/03/2025", "20/03/2025",
    "21/03/2025", "22/03/2025", "23/03/2025", "24/03/2025", "25/03/2025",
    "26/03/2025", "27/03/2025", "28/03/2025", "29/03/2025",
    # עיד אל-פיטר
    "30/03/2025", "31/03/2025", "01/04/2025",
    # עיד אל-אדחא
    "06/06/2025", "07/06/2025", "08/06/2025", "09/06/2025",
    # ראס אל-סנה (שנה חדשה)
    "27/06/2025",
    # מולד הנביא
    "05/09/2025",
}

MUSLIM_HOLIDAYS_2026 = {
    # רמדאן (תאריכים משוערים)
    "18/02/2026", "19/02/2026", "20/02/2026", "21/02/2026", "22/02/2026",
    "23/02/2026", "24/02/2026", "25/02/2026", "26/02/2026", "27/02/2026",
    "28/02/2026", "01/03/2026", "02/03/2026", "03/03/2026", "04/03/2026",
    "05/03/2026", "06/03/2026", "07/03/2026", "08/03/2026", "09/03/2026",
    "10/03/2026", "11/03/2026", "12/03/2026", "13/03/2026", "14/03/2026",
    "15/03/2026", "16/03/2026", "17/03/2026", "18/03/2026", "19/03/2026",
    # עיד אל-פיטר
    "20/03/2026", "21/03/2026", "22/03/2026",
    # עיד אל-אדחא
    "27/05/2026", "28/05/2026", "29/05/2026", "30/05/2026",
    # ראס אל-סנה
    "17/06/2026",
    # מולד הנביא
    "25/08/2026",
}

# שבתות — מסוננות לפי יום בשבוע, לא צריך רשימת תאריכים
# ערבי חג — חלק מהקווים עוברים ללוח מיוחד כבר מ-14:00

# === פונקציה ראשית ===

def get_all_holidays():
    """מחזיר סט של כל התאריכים שצריך לסנן (DD/MM/YYYY)."""
    return (
        JEWISH_HOLIDAYS_2025 | JEWISH_HOLIDAYS_2026 |
        MUSLIM_HOLIDAYS_2025 | MUSLIM_HOLIDAYS_2026
    )


def is_holiday(date_str):
    """בודק אם תאריך (DD/MM/YYYY) הוא חג."""
    return date_str in get_all_holidays()


def get_holiday_name(date_str):
    """מחזיר שם החג (לצורך דיווח). מחזיר None אם לא חג."""
    # בדיקה בסיסית לפי טווחי תאריכים
    if date_str in JEWISH_HOLIDAYS_2025 or date_str in JEWISH_HOLIDAYS_2026:
        return "חג יהודי"
    if date_str in MUSLIM_HOLIDAYS_2025 or date_str in MUSLIM_HOLIDAYS_2026:
        return "חג מוסלמי"
    return None
